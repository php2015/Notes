<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

    <script>

        Object.defineProperty(Object, 'freezePolyfill', {
            value: function (obj) {
                let i;
                for (i in obj) {
                    if (obj.hasOwnProperty(i)) {         //判断for-in枚举出来的是否是自身的属性 
                        Object.defineProperty(obj, i, {  //在一个对象上定义一个新属性或修改一个现有属性 此处修改现有属性名的writable属性
                            writable: false
                        });
                        // console.log(typeof obj[i])       //  i是属性名 obj[i]才能找到属性 才能判断类型 返回的是小写哦
                        if (typeof obj[i] === "object") {
                            arguments.callee(obj[i]);       //  Object.freezePolyfill(obj[i]); 解耦
                        }
                    }
                }
                Object.seal(obj);
            }
        })

        var a = {
            age: 1,
            name: "wt",
            b: {
                b: "b"
            }
        }
        Object.freezePolyfill(a);



        // < -- 老师请看下面这个方法与上面那个方法的区别 -- >
        // Object.defineProperty(Object, 'aaa', {
        //     value: function (obj) {
        //         let i;
        //         for (i in obj) {
        //             if (obj.hasOwnProperty(i)) {
        //                 if (typeof obj[i] === "object") {
        //                     arguments.callee(obj[i]);       //  Object.freezePolyfill(obj[i]); 解耦
        //                 }
        //             }
        //         }
        //         Object.freeze(obj);
        //     }
        // })


        // Object.aaa(a);
    </script>
</body>

</html>